"use strict";(self.webpackChunkProject_Management_System=self.webpackChunkProject_Management_System||[]).push([[535],{6535:(tt,f,o)=>{o.r(f),o.d(f,{ManagerTasksModule:()=>W});var u=o(6814),A=o(8693),t=o(5879),v=o(9862);let k=(()=>{class s{constructor(e){this._HttpClient=e}onGetManagerTasks(e){return this._HttpClient.get("Task/manager",{params:e})}onAddTask(e){return this._HttpClient.post("Task",e)}ongetTaskbyId(e){return this._HttpClient.get(`Task/${e}`)}onEditTask(e,a){return this._HttpClient.put(`Task/${e}`,a)}onDeleteTask(e){return this._HttpClient.delete(`Task/${e}`)}static#t=this.\u0275fac=function(a){return new(a||s)(t.LFG(v.eN))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Z=o(2425),p=o(3403),U=o(7700),g=o(9157),x=o(2296),C=o(617),r=o(6223),c=o(6311),b=o(4913),_=o(3680),I=o(3365);function M(s,i){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-option",11),t._uU(2),t.qZA(),t.BQk()),2&s){const e=i.$implicit,a=t.oxw();t.xp6(1),t.Q6J("value",a.statusData.indexOf(e)),t.xp6(1),t.Oqu(e)}}const D=function(s,i,e){return{ToDo:s,InProgress:i,Done:e}},N=function(s){return["/dashboard/manager/tasks/view",s]},q=function(s){return["/dashboard/manager/tasks/edit",s]};function y(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"span",12),t._uU(5),t.qZA()(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"td")(14,"button",13)(15,"mat-icon"),t._uU(16,"more_vert"),t.qZA()(),t.TgZ(17,"mat-menu",null,14)(19,"button",15)(20,"mat-icon"),t._uU(21,"visibility"),t.qZA(),t.TgZ(22,"span"),t._uU(23,"View"),t.qZA()(),t.TgZ(24,"button",15)(25,"mat-icon"),t._uU(26,"edit-square"),t.qZA(),t.TgZ(27,"span"),t._uU(28,"Edit"),t.qZA()(),t.TgZ(29,"button",16),t.NdJ("click",function(){const d=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.openDeleteDialog(d))}),t.TgZ(30,"mat-icon"),t._uU(31,"delete"),t.qZA(),t.TgZ(32,"span"),t._uU(33,"Delete"),t.qZA()()()()()}if(2&s){const e=i.$implicit,a=t.MAs(18);t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Q6J("ngClass",t.kEZ(12,D,"ToDo"==e.status,"InProgress"==e.status,"Done"==e.status)),t.xp6(1),t.hij(" ",e.status," "),t.xp6(2),t.Oqu(e.employee.userName),t.xp6(2),t.Oqu(e.project.title),t.xp6(2),t.Oqu(t.xi3(12,9,e.creationDate,"dd-MM-yyyy")),t.xp6(3),t.Q6J("matMenuTriggerFor",a),t.xp6(5),t.Q6J("routerLink",t.VKq(16,N,e.id)),t.xp6(5),t.Q6J("routerLink",t.VKq(18,q,e.id))}}const S=function(){return[5,10,50,100]};let F=(()=>{class s{constructor(e,a,n,d){this._TaskService=e,this.toastr=a,this.router=n,this.dialog=d,this.pageIndex=0,this.pageSize=5,this.pageNumber=1,this.searchValue="",this.statusID=0,this.statusData=["All","ToDo","InProgress","Done"],this.listTasks=[]}ngOnInit(){this.getAllTasks()}getAllTasks(){let e={};e={pageNumber:this.pageNumber,pageSize:this.pageNumber,status:this.searchValue},1==this.statusID?(e={pageNumber:this.pageNumber,pageSize:this.pageSize,status:this.statusData[1]},console.log(this.statusData[1])):e=2==this.statusID?{pageNumber:this.pageNumber,pageSize:this.pageSize,status:this.statusData[2]}:3==this.statusID?{pageNumber:this.pageNumber,pageSize:this.pageSize,status:this.statusData[3]}:{pageNumber:this.pageNumber,pageSize:this.pageSize,status:this.searchValue},this._TaskService.onGetManagerTasks(e).subscribe({next:a=>{console.log(a),this.tableData=a,console.log(this.searchValue),this.listTasks=this.tableData.data,localStorage.setItem("tasksNumber",JSON.stringify(a.totalNumberOfRecords))}})}handlePageEvent(e){this.pageSize=e.pageSize,this.pageNumber=e.pageIndex+1,this.getAllTasks()}openDeleteDialog(e){this.dialog.open(A.F,{data:e,width:"35%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),console.log(n),n&&(console.log(n.id),this.deleteTask(n.id))})}deleteTask(e){this._TaskService.onDeleteTask(e).subscribe({next:a=>{console.log(a)},error:a=>{this.toastr.error(a.error.message,"Error!")},complete:()=>{this.toastr.success("Task Deleted Successfully"),this.getAllTasks()}})}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(k),t.Y36(Z._W),t.Y36(p.F0),t.Y36(U.uw))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-manager-tasks"]],decls:34,vars:8,consts:[[1,"page-header","shadow-sm"],["routerLink","/dashboard/manager/tasks/add",1,"primary","px-3"],[1,"fa-solid","fa-plus","mx-2"],[1,"table-card","container","py-5"],[1,"bg-whiteColor","p-3"],[1,"w-100"],[1,"bg-gray","rounded-pill","w-50"],["disableRipple","",3,"ngModel","ngModelChange","selectionChange"],[4,"ngFor","ngForOf"],[1,"table","table-striped","custom-table"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","pageIndex","page"],[3,"value"],[1,"status",3,"ngClass"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"]],template:function(a,n){1&a&&(t.TgZ(0,"section")(1,"div",0)(2,"h3"),t._uU(3,"Tasks"),t.qZA(),t.TgZ(4,"button",1),t._UZ(5,"span",2),t.TgZ(6,"span"),t._uU(7,"Add New Task"),t.qZA()()(),t.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Select an option"),t.qZA(),t.TgZ(14,"mat-select",7),t.NdJ("ngModelChange",function(l){return n.statusID=l})("selectionChange",function(){return n.getAllTasks()}),t.YNc(15,M,3,2,"ng-container",8),t.qZA()()()(),t.TgZ(16,"table",9)(17,"thead")(18,"th"),t._uU(19,"Title"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"status"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"user name"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"project"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Date Created"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Actions"),t.qZA()(),t.TgZ(30,"tbody"),t.YNc(31,y,34,20,"tr",8),t.qZA()(),t.TgZ(32,"div")(33,"mat-paginator",10),t.NdJ("page",function(l){return n.handlePageEvent(l)}),t.qZA()()()()),2&a&&(t.xp6(14),t.Q6J("ngModel",n.statusID),t.xp6(1),t.Q6J("ngForOf",n.statusData),t.xp6(16),t.Q6J("ngForOf",n.listTasks),t.xp6(2),t.Q6J("length",null==n.tableData?null:n.tableData.totalNumberOfRecords)("pageSizeOptions",t.DdM(7,S))("pageSize",null==n.tableData?null:n.tableData.pageSize)("pageIndex",n.pageIndex))},dependencies:[u.mk,u.sg,p.rH,g.KE,g.hX,x.RK,C.Hw,r.JJ,c.VK,c.OP,c.p6,r.On,b.gD,_.ey,I.NW,u.uU],styles:[".status[_ngcontent-%COMP%]{padding:8px 15px;border-radius:16px;color:#fff}.status.Done[_ngcontent-%COMP%]{background-color:#009247}.status.InProgress[_ngcontent-%COMP%]{background-color:#ef9b28a3}.status.ToDo[_ngcontent-%COMP%]{background-color:#e4e1f5}input[_ngcontent-%COMP%]{background-color:#f5f5f5}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#ef9b28;outline:0;box-shadow:0 0 0 .25rem #ef9b2836}.rounded-pill[_ngcontent-%COMP%]{--bs-border-radius-pill: 1.5rem}"]})}return s})();var J=o(6208),O=o(7862),j=o(1948),w=o(2032);function P(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1,"Add a new task"),t.qZA())}function Q(s,i){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.hij("Edit ",null==e.taskData?null:e.taskData.title,"")}}function Y(s,i){if(1&s&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Oqu(null==e.taskData?null:e.taskData.title)}}function z(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1,"title is required"),t.qZA())}function E(s,i){if(1&s&&(t.TgZ(0,"span",22),t.YNc(1,z,2,0,"span",3),t.qZA()),2&s){const e=t.oxw();let a;t.xp6(1),t.Q6J("ngIf",null==(a=e.taskForm.get("title"))||null==a.errors?null:a.errors.required)}}function V(s,i){1&s&&(t.TgZ(0,"span"),t._uU(1,"description is required"),t.qZA())}function H(s,i){if(1&s&&(t.TgZ(0,"span",22),t.YNc(1,V,2,0,"span",3),t.qZA()),2&s){const e=t.oxw();let a;t.xp6(1),t.Q6J("ngIf",null==(a=e.taskForm.get("description"))||null==a.errors?null:a.errors.required)}}function L(s,i){if(1&s&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.userName)}}function G(s,i){if(1&s&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&s){const e=i.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.title)}}function $(s,i){1&s&&(t.TgZ(0,"button",24),t._uU(1,"Add"),t.qZA())}function K(s,i){1&s&&(t.TgZ(0,"button",24),t._uU(1,"Update"),t.qZA())}const B=function(){return["/dashboard/manager/tasks"]};let m=(()=>{class s{constructor(e,a,n,d,l,X){this._TaskService=e,this._HelperService=a,this._ProjectsService=n,this.router=d,this.ActivatedRoute=l,this.toastr=X,this.pageSize=10,this.pageNumber=1,this.listProjects=[],this.listUsers=[],this.isViewMode=!0,this.isEditMode=!0,this.isAddMode=!0,this.taskForm=new r.cw({title:new r.NI(null,[r.kI.required]),description:new r.NI(null,[r.kI.required]),employeeId:new r.NI(null,[r.kI.required]),projectId:new r.NI(null,[r.kI.required])}),this.taskId=l.snapshot.params.id,this.taskId?(this.getTaskById(this.taskId),this.isAddMode=!1,l.url.subscribe(h=>{this.isViewMode=h.some(T=>"view"===T.path),this.disableFormControls()}),l.url.subscribe(h=>{this.isEditMode=h.some(T=>"edit"===T.path),this.enableFormControls()})):(this.isAddMode=!0,this.isEditMode=!1,this.isViewMode=!1)}disableFormControls(){this.isViewMode&&(this.taskForm.get("title")?.disable(),this.taskForm.get("description")?.disable(),this.taskForm.get("employeeId")?.disable(),this.taskForm.get("projectId")?.disable())}enableFormControls(){this.isEditMode&&(this.taskForm.get("title")?.enable(),this.taskForm.get("description")?.enable(),this.taskForm.get("employeeId")?.enable(),this.taskForm.get("projectId")?.enable())}ngOnInit(){this.getAllUsers(),this.getMyProjects()}onSubmit(e){this.taskId?this._TaskService.onEditTask(this.taskId,e.value).subscribe({next:a=>{},error:a=>{this.toastr.error("error on update task")},complete:()=>{this.router.navigate(["/dashboard/manager/tasks"]),this.toastr.success("task updated successfully")}}):this._TaskService.onAddTask(e.value).subscribe({next:a=>{console.log(a)},error:a=>{this.toastr.error("error on adding task")},complete:()=>{this.router.navigate(["/dashboard/manager/tasks"]),this.toastr.success("task added successfully")}})}getAllUsers(){this._HelperService.onGetUsers().subscribe({next:e=>{console.log(e),this.listUsers=e.data}})}getMyProjects(){this._ProjectsService.onGetManagerProjects({pageSize:this.pageSize,pageNumber:this.pageNumber}).subscribe({next:a=>{console.log(a),this.listProjects=a.data}})}getTaskById(e){this._TaskService.ongetTaskbyId(e).subscribe({next:a=>{console.log(a),this.taskData=a},error:a=>{console.log("error")},complete:()=>{this.taskForm.patchValue({title:this.taskData.title,description:this.taskData.description,employeeId:this.taskData.employee.id,projectId:this.taskData.project.id})}})}static#t=this.\u0275fac=function(a){return new(a||s)(t.Y36(k),t.Y36(O.W),t.Y36(j.m),t.Y36(p.F0),t.Y36(p.gz),t.Y36(Z._W))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-update-task"]],decls:46,vars:12,consts:[[1,"page-header"],["routerLink","/dashboard/manager/tasks"],[1,"fa-solid","fa-angle-left"],[4,"ngIf"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-card"],[1,"mt-5"],["appearance","outline",1,"w-100"],["formControlName","title","matInput","",1,"text-dark"],["class","text-danger mb-3",4,"ngIf"],[1,"my-3"],["formControlName","description","matInput","",1,"text-dark"],["matInput",""],[1,"row"],[1,"col-6"],["formControlName","employeeId",1,"text-dark"],[3,"value",4,"ngFor","ngForOf"],["formControlName","projectId",1,"text-dark"],[1,"d-flex","justify-content-between"],["type","button",1,"outline-primary","w-25",3,"routerLink"],["class","primary w-25",4,"ngIf"],[1,"text-danger","mb-3"],[3,"value"],[1,"primary","w-25"]],template:function(a,n){if(1&a&&(t.TgZ(0,"section")(1,"div",0)(2,"div")(3,"a",1),t._UZ(4,"i",2),t.TgZ(5,"span"),t._uU(6,"View All Tasks"),t.qZA()(),t.TgZ(7,"h5"),t.YNc(8,P,2,0,"span",3),t.YNc(9,Q,2,1,"span",3),t.YNc(10,Y,2,1,"span",3),t.qZA()()(),t.TgZ(11,"div",4)(12,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit(n.taskForm)}),t.TgZ(13,"div",6)(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),t._uU(17,"Title"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.YNc(19,E,2,1,"span",10),t.qZA(),t.TgZ(20,"div",11)(21,"mat-form-field",8)(22,"mat-label"),t._uU(23,"Description"),t.qZA(),t._UZ(24,"input",12)(25,"textarea",13),t.qZA(),t.YNc(26,H,2,1,"span",10),t.qZA(),t.TgZ(27,"div",14)(28,"div",15)(29,"mat-form-field",8)(30,"mat-label"),t._uU(31,"User"),t.qZA(),t.TgZ(32,"mat-select",16),t.YNc(33,L,2,2,"mat-option",17),t.qZA()()(),t.TgZ(34,"div",15)(35,"mat-form-field",8)(36,"mat-label"),t._uU(37,"Project"),t.qZA(),t.TgZ(38,"mat-select",18),t.YNc(39,G,2,2,"mat-option",17),t.qZA()()()(),t._UZ(40,"hr"),t.TgZ(41,"div",19)(42,"button",20),t._uU(43,"Cancel"),t.qZA(),t.YNc(44,$,2,0,"button",21),t.YNc(45,K,2,0,"button",21),t.qZA()()()()()),2&a){let d,l;t.xp6(8),t.Q6J("ngIf",1==n.isAddMode),t.xp6(1),t.Q6J("ngIf",1==n.isEditMode),t.xp6(1),t.Q6J("ngIf",1==n.isViewMode),t.xp6(2),t.Q6J("formGroup",n.taskForm),t.xp6(7),t.Q6J("ngIf",(null==(d=n.taskForm.get("title"))?null:d.errors)&&(null==(d=n.taskForm.get("title"))?null:d.touched)),t.xp6(7),t.Q6J("ngIf",(null==(l=n.taskForm.get("description"))?null:l.errors)&&(null==(l=n.taskForm.get("description"))?null:l.touched)),t.xp6(7),t.Q6J("ngForOf",n.listUsers),t.xp6(6),t.Q6J("ngForOf",n.listProjects),t.xp6(3),t.Q6J("routerLink",t.DdM(11,B)),t.xp6(2),t.Q6J("ngIf",1==n.isAddMode),t.xp6(1),t.Q6J("ngIf",1==n.isEditMode)}},dependencies:[u.sg,u.O5,p.rH,w.Nt,g.KE,g.hX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,b.gD,_.ey]})}return s})();const R=[{path:"",component:F},{path:"add",component:m},{path:"view/:id",component:m},{path:"edit/:id",component:m}];let W=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#e=this.\u0275mod=t.oAB({type:s});static#s=this.\u0275inj=t.cJS({imports:[u.ez,p.Bz.forChild(R),J.m]})}return s})()}}]);