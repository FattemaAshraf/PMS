"use strict";(self.webpackChunkProject_Management_System=self.webpackChunkProject_Management_System||[]).push([[78],{1587:(k,f,s)=>{s.r(f),s.d(f,{ManagerProjectsModule:()=>Y});var u=s(6814),T=s(8693),a=s(6223),g=s(7700),t=s(5879),m=s(2032),p=s(9157);let b=(()=>{class r{constructor(o,e){this.dialogRef=o,this.data=e,this.projectForm=new a.cw({title:new a.NI(null),description:new a.NI(null)}),this.disableFormControls()}ngOnInit(){}onNoClick(){this.dialogRef.close()}disableFormControls(){this.projectForm.get("title")?.disable(),this.projectForm.get("description")?.disable()}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(g.so),t.Y36(g.WI))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-view-project"]],decls:26,vars:4,consts:[[1,"page-header"],[1,"cursor",3,"click"],[1,"fa-solid","fa-angle-left"],[1,"ms-5"],[1,"container"],[3,"formGroup"],[1,"form-card"],[1,"mt-5"],["appearance","outline",1,"w-100"],[1,"text-secondry"],["formControlName","title","matInput","",1,"text-dark",3,"ngModel","ngModelChange"],[1,"my-3"],["formControlName","description","matInput","",1,"text-dark",3,"ngModel","ngModelChange"],[1,"text-center"],["type","button",1,"primary","w-25",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"section")(1,"div",0)(2,"div")(3,"a",1),t.NdJ("click",function(){return n.onNoClick()}),t._UZ(4,"i",2),t.TgZ(5,"span"),t._uU(6,"View Project"),t.qZA()(),t.TgZ(7,"h3",3),t._uU(8),t.qZA()()(),t.TgZ(9,"div",4)(10,"form",5)(11,"div",6)(12,"div",7)(13,"mat-form-field",8)(14,"mat-label",9),t._uU(15,"Title"),t.qZA(),t.TgZ(16,"input",10),t.NdJ("ngModelChange",function(l){return n.data.title=l}),t.qZA()()(),t.TgZ(17,"div",11)(18,"mat-form-field",8)(19,"mat-label",9),t._uU(20,"Description"),t.qZA(),t.TgZ(21,"input",12),t.NdJ("ngModelChange",function(l){return n.data.description=l}),t.qZA()()(),t._UZ(22,"hr"),t.TgZ(23,"div",13)(24,"button",14),t.NdJ("click",function(){return n.onNoClick()}),t._uU(25,"Cancel"),t.qZA()()()()()()),2&e&&(t.xp6(8),t.Oqu(n.data.title),t.xp6(2),t.Q6J("formGroup",n.projectForm),t.xp6(6),t.Q6J("ngModel",n.data.title),t.xp6(5),t.Q6J("ngModel",n.data.description))},dependencies:[m.Nt,p.KE,p.hX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".cursor[_ngcontent-%COMP%]{cursor:pointer}"]})}return r})();var P=s(8645),A=s(3620),j=s(1948),Z=s(2425),d=s(3403),C=s(2296),U=s(617),h=s(6311),v=s(3365);const M=function(r){return["/dashboard/manager/projects/edit",r]};function y(r,c){if(1&r){const o=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"button",11)(15,"mat-icon"),t._uU(16,"more_vert"),t.qZA()(),t.TgZ(17,"mat-menu",null,12)(19,"button",13),t.NdJ("click",function(){const i=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.openViewDialog("2000ms","2000ms",i))}),t.TgZ(20,"mat-icon"),t._uU(21,"visibility"),t.qZA(),t.TgZ(22,"span"),t._uU(23,"View"),t.qZA()(),t.TgZ(24,"button",14)(25,"mat-icon"),t._uU(26,"edit-square"),t.qZA(),t.TgZ(27,"span"),t._uU(28,"Edit"),t.qZA()(),t.TgZ(29,"button",13),t.NdJ("click",function(){const i=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.openDeleteDialog(i))}),t.TgZ(30,"mat-icon"),t._uU(31,"delete"),t.qZA(),t.TgZ(32,"span"),t._uU(33,"Delete"),t.qZA()()()()()}if(2&r){const o=c.$implicit,e=t.MAs(18);t.xp6(2),t.Oqu(o.title),t.xp6(2),t.Oqu(o.description),t.xp6(2),t.Oqu(t.xi3(7,7,o.creationDate,"dd-MM-yyyy")),t.xp6(3),t.Oqu(t.xi3(10,10,o.modificationDate,"dd-MM-yyyy")),t.xp6(3),t.Oqu(null==o||null==o.task?null:o.task.length),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(10),t.Q6J("routerLink",t.VKq(13,M,o.id))}}const x=function(){return[5,10,50,100]};let q=(()=>{class r{constructor(o,e,n,i){this._ProjectsService=o,this.dialog=e,this.toastr=n,this.router=i,this.searchValue="",this.searchSubject=new P.x,this.listProjects=[],this.pageIndex=0,this.pageSize=5,this.pageNumber=1}ngOnInit(){this.getMyProjects(),this.searchSubject.pipe((0,A.b)(1e3)).subscribe({next:o=>{console.log(o),this.getMyProjects()}})}getMyProjects(){this._ProjectsService.onGetManagerProjects({pageSize:this.pageSize,pageNumber:this.pageNumber,title:this.searchValue}).subscribe({next:e=>{console.log(e),this.tableData=e,this.listProjects=this.tableData.data,localStorage.setItem("projectsCount",JSON.stringify(e.totalNumberOfRecords)),this.listProjects=this.tableData.data,localStorage.setItem("projectsCount",e.totalNumberOfRecords)}})}openDeleteDialog(o){this.dialog.open(T.F,{data:o,width:"35%"}).afterClosed().subscribe(n=>{console.log("The dialog was closed"),n&&(console.log(n.id),this.onDeleteProject(n.id))})}onDeleteProject(o){this._ProjectsService.deleteProject(o).subscribe({next:e=>{console.log(e)},error:e=>{this.toastr.error(e.error.message,"Error!"),console.log(e)},complete:()=>{this.toastr.success("Project Deleted Successfully","Ok"),this.getMyProjects()}})}openViewDialog(o,e,n){this.dialog.open(b,{width:"60%",data:n,enterAnimationDuration:o,exitAnimationDuration:e})}handlePageEvent(o){console.log(o),this.pageSize=o.pageSize,this.pageNumber=o.pageIndex+1,this.getMyProjects()}onSearchInputChange(){this.searchSubject.next(this.searchValue)}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(j.m),t.Y36(g.uw),t.Y36(Z._W),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-manager-projects"]],decls:33,vars:7,consts:[[1,"page-header","shadow-sm"],["routerLink","/dashboard/manager/projects/add",1,"primary","px-3"],[1,"fa-solid","fa-plus","mx-2"],[1,"table-card","container","py-5"],[1,"bg-whiteColor","p-3"],[1,"w-100"],["appearance","fill",1,"bg-gray","rounded-pill","w-50"],["matInput","","placeholder","Search Here by Title",3,"ngModel","ngModelChange","keyup"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSizeOptions","pageSize","pageIndex","page"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"section")(1,"div",0)(2,"h3"),t._uU(3,"Projects"),t.qZA(),t.TgZ(4,"button",1),t._UZ(5,"span",2),t.TgZ(6,"span"),t._uU(7,"Add New Project"),t.qZA()()(),t.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),t._uU(13,"Search"),t.qZA(),t.TgZ(14,"input",7),t.NdJ("ngModelChange",function(l){return n.searchValue=l})("keyup",function(){return n.onSearchInputChange()}),t.qZA()()()(),t.TgZ(15,"table",8)(16,"thead")(17,"th"),t._uU(18,"Title"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Description"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Creation Date"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Modificaion Date"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Num of tasks"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Actions"),t.qZA()(),t.TgZ(29,"tbody"),t.YNc(30,y,34,15,"tr",9),t.qZA()(),t.TgZ(31,"div")(32,"mat-paginator",10),t.NdJ("page",function(l){return n.handlePageEvent(l)}),t.qZA()()()()),2&e&&(t.xp6(14),t.Q6J("ngModel",n.searchValue),t.xp6(16),t.Q6J("ngForOf",n.listProjects),t.xp6(2),t.Q6J("length",null==n.tableData?null:n.tableData.totalNumberOfRecords)("pageSizeOptions",t.DdM(6,x))("pageSize",null==n.tableData?null:n.tableData.pageSize)("pageIndex",n.pageIndex))},dependencies:[u.sg,d.rH,m.Nt,p.KE,p.hX,C.RK,U.Hw,a.Fj,a.JJ,h.VK,h.OP,h.p6,a.On,v.NW,u.uU],styles:["input[_ngcontent-%COMP%]{background-color:#f5f5f5}.form-select[_ngcontent-%COMP%]:focus, .form-control[_ngcontent-%COMP%]:focus{border-color:#ef9b28;outline:0;box-shadow:0 0 0 .25rem #ef9b2836}.rounded-pill[_ngcontent-%COMP%]{--bs-border-radius-pill: 1.5rem}.mdc-text-field--filled[_ngcontent-%COMP%]:not(.mdc-text-field--disabled)   .mdc-text-field__input[_ngcontent-%COMP%]{color:#000}"]})}return r})();var I=s(6208);function N(r,c){1&r&&(t.TgZ(0,"span"),t._uU(1,"Add a new project"),t.qZA())}function S(r,c){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.hij("update ",null==o.projectData?null:o.projectData.title," project")}}function J(r,c){1&r&&(t.TgZ(0,"span"),t._uU(1,"title is required"),t.qZA())}function w(r,c){if(1&r&&(t.TgZ(0,"span",17),t.YNc(1,J,2,0,"span",3),t.qZA()),2&r){const o=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=o.projectForm.get("title"))||null==e.errors?null:e.errors.required)}}function F(r,c){1&r&&(t.TgZ(0,"span"),t._uU(1,"description is required"),t.qZA())}function D(r,c){if(1&r&&(t.TgZ(0,"span",17),t.YNc(1,F,2,0,"span",3),t.qZA()),2&r){const o=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=o.projectForm.get("description"))||null==e.errors?null:e.errors.required)}}const O=function(){return["/dashboard/manager/projects"]};let _=(()=>{class r{constructor(o,e,n,i){this._ProjectsService=o,this.toastr=e,this.router=n,this._ActivatedRoute=i,this.isUpdatePage=!1,this.projectForm=new a.cw({title:new a.NI(null,[a.kI.required]),description:new a.NI(null,[a.kI.required])}),this.projectId=i.snapshot.params.id,this.projectId?(this.isUpdatePage=!0,this.getProjectById(this.projectId)):this.isUpdatePage=!1}onSubmit(o){this.projectId?this._ProjectsService.editProject(o.value,this.projectId).subscribe({next:e=>{console.log(e)},error:e=>{this.toastr.error("upate failed")},complete:()=>{this.router.navigate(["/dashboard/manager/projects"]),this.toastr.success("Project Updateed Successfully")}}):this._ProjectsService.onAddProject(o.value).subscribe({next:e=>{console.log(e)},error:e=>{this.toastr.error(e.error.message,"Error")},complete:()=>{this.router.navigate(["dashboard/manager/projects"]),this.toastr.success("Project Added Successfully")}})}getProjectById(o){this._ProjectsService.onProjectById(o).subscribe({next:e=>{this.projectData=e},error:e=>{this.toastr.error(e.error.message,"Error!")},complete:()=>{this.projectForm.patchValue({title:this.projectData?.title,description:this.projectData?.description})}})}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||r)(t.Y36(j.m),t.Y36(Z._W),t.Y36(d.F0),t.Y36(d.gz))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-add-update-project"]],decls:32,vars:7,consts:[[1,"page-header"],["routerLink","../"],[1,"fa-solid","fa-angle-left"],[4,"ngIf"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"form-card"],[1,"mt-5"],["appearance","outline",1,"w-100"],["formControlName","title","matInput",""],["class","text-danger mb-3",4,"ngIf"],[1,"my-3"],["formControlName","description","matInput",""],["matInput",""],[1,"d-flex","justify-content-between"],["type","button",1,"outline-primary","w-25",3,"routerLink"],[1,"primary","w-25"],[1,"text-danger","mb-3"]],template:function(e,n){if(1&e&&(t.TgZ(0,"section")(1,"div",0)(2,"div")(3,"a",1),t._UZ(4,"i",2),t.TgZ(5,"span"),t._uU(6,"View All Projects"),t.qZA()(),t.TgZ(7,"h5"),t.YNc(8,N,2,0,"span",3),t.YNc(9,S,2,1,"span",3),t.qZA()()(),t.TgZ(10,"div",4)(11,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmit(n.projectForm)}),t.TgZ(12,"div",6)(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Title"),t.qZA(),t._UZ(17,"input",9),t.qZA(),t.YNc(18,w,2,1,"span",10),t.qZA(),t.TgZ(19,"div",11)(20,"mat-form-field",8)(21,"mat-label"),t._uU(22,"Description"),t.qZA(),t._UZ(23,"input",12)(24,"textarea",13),t.qZA(),t.YNc(25,D,2,1,"span",10),t.qZA(),t._UZ(26,"hr"),t.TgZ(27,"div",14)(28,"button",15),t._uU(29,"Cancel"),t.qZA(),t.TgZ(30,"button",16),t._uU(31,"Save"),t.qZA()()()()()()),2&e){let i,l;t.xp6(8),t.Q6J("ngIf",0==n.isUpdatePage),t.xp6(1),t.Q6J("ngIf",1==n.isUpdatePage),t.xp6(2),t.Q6J("formGroup",n.projectForm),t.xp6(7),t.Q6J("ngIf",(null==(i=n.projectForm.get("title"))?null:i.errors)&&(null==(i=n.projectForm.get("title"))?null:i.touched)),t.xp6(7),t.Q6J("ngIf",(null==(l=n.projectForm.get("description"))?null:l.errors)&&(null==(l=n.projectForm.get("description"))?null:l.touched)),t.xp6(3),t.Q6J("routerLink",t.DdM(6,O))}},dependencies:[u.O5,d.rH,m.Nt,p.KE,p.hX,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]})}return r})();const V=[{path:"",component:q},{path:"add",component:_},{path:"edit/:id",component:_}];let Y=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#e=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[u.ez,d.Bz.forChild(V),I.m]})}return r})()}}]);